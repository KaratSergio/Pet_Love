import{y as q,z as c,j as e,I as x,r as u,M as R,b as _,q as w,t as v,v as B}from"./index-a1ae7f00.js";import{P as U}from"./PetBlock-682a0d61.js";const D="/Pet_Love/assets/mob-e266d26e.webp",$="/Pet_Love/assets/mob-2x-e87fae68.webp",F="/Pet_Love/assets/mob-3x-464a8c77.webp",T="/Pet_Love/assets/tab-a0252dac.webp",z="/Pet_Love/assets/tab-2x-a938beb1.webp",A="/Pet_Love/assets/tab-3x-73a025e5.webp",E="/Pet_Love/assets/desk-baa3f3ad.webp",M="/Pet_Love/assets/desk-2x-92e44d5a.webp",Y="/Pet_Love/assets/desk-3x-b1e144fd.webp",O={mobile:{default:D,"2x":$,"3x":F,position:{top:"8px",left:"0px"}},tablet:{default:T,"2x":z,"3x":A,position:{top:"8px",left:"0px"}},desktop:{default:E,"2x":M,"3x":Y,position:{top:"-16px",left:"-25px"}}},V=/^https?:\/\/.*\.(?:png|jpg|jpeg|gif|bmp|webp)$/,G=q().shape({title:c().required("Title is required"),name:c().required("Name is required"),imgURL:c().matches(V,"Invalid format").required("Image URL is required"),species:c().required("Species is required"),birthday:c().matches(/^\d{4}-\d{2}-\d{2}$/,"Invalid format").required("Birthday is required"),sex:c().required("Sex is required")}),H=({setSexPet:o,className:r})=>{const s=t=>{const a=t.currentTarget.dataset.value;o(a)};return e.jsxs("ul",{className:`flex gap-2 ${r}`,children:[e.jsx("li",{className:"flex items-center justify-center bg-lightRed rounded-full size-10","data-value":"female",onClick:s,children:e.jsx(x,{id:"icon-female",width:"w-6",height:"h-6",strokeColor:"stroke-red"})}),e.jsx("li",{className:"flex items-center justify-center bg-lightBlue rounded-full size-10","data-value":"male",onClick:s,children:e.jsx(x,{id:"icon-male",width:"w-6",height:"h-6",strokeColor:"stroke-blue"})}),e.jsx("li",{className:"flex items-center justify-center bg-lightYellow rounded-full size-10","data-value":"multiple",onClick:s,children:e.jsx(x,{id:"icon-multiple",width:"w-6",height:"h-6",strokeColor:"stroke-yellow"})})]})},W=({register:o,placeholder:r,className:s,error:t})=>e.jsxs("div",{className:`flex flex-col ${s}`,children:[e.jsx("input",{type:"date",placeholder:r,className:`py-3 px-4 border rounded-full w-full ${t?"border-red-500":"border-gray-300"}`,...o}),t&&typeof t.message=="string"&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.message})]}),J=({register:o,options:r,className:s,error:t})=>e.jsxs("div",{className:`flex flex-col ${s}`,children:[e.jsx("select",{className:`py-3 px-4 border rounded-full w-full ${t?"border-red-500":"border-gray-300"}`,...o(),children:r.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),t&&typeof t.message=="string"&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.message})]}),K=()=>{var b;const[o,r]=u.useState("female"),[s,t]=u.useState(null),[a,y]=u.useState(null),h=u.useRef(null),N=R(),{register:m,handleSubmit:k,formState:{errors:d},setValue:P}=_({resolver:B(G)}),I=async l=>{if(l.sex=o,l.avatar&&l.avatar.length>0){const n=l.avatar[0],g="https://api.cloudinary.com/v1_1/ddsnh5o3h/upload",i=new FormData;i.append("file",n),i.append("upload_preset","petlove");try{const p=await fetch(g,{method:"POST",body:i});if(!p.ok)throw console.error("Upload response:",p),new Error("Failed to upload image");const j=(await p.json()).secure_url;l.imgURL=j,y(j)}catch(p){console.error(p)}}console.log(l)},C=l=>{const n=l.target.files;if(n&&n.length>0){const g=n[0];P("avatar",n);const i=new FileReader;i.onloadend=()=>{t(i.result)},i.readAsDataURL(g)}},S=()=>{h.current&&h.current.click()},f=s||a,L=()=>{N("/profile")};return e.jsxs("div",{className:"relative w-[592px] h-[654px] bg-white rounded-60 py-[60px] px-20",children:[e.jsxs("h2",{className:"font-bold text-[32px] mb-16 leading-[18px] tracking-[-0.02em]",children:["Add my pet / ",e.jsx("span",{className:"text-lightGrey ml-2 text-base",children:"Personal details"})]}),e.jsxs("form",{onSubmit:k(I),className:"",children:[e.jsx(H,{className:"absolute top-[130px]",setSexPet:r}),e.jsx("div",{className:"rounded-full size-[86px] m-auto flex items-center justify-center bg-lightYellow overflow-hidden",children:f?e.jsx("img",{src:f,className:"w-full h-full object-cover",alt:"Pet Avatar"}):e.jsx(x,{id:"icon-paw-print",width:"w-[44px]",height:"h-[44px]",color:"fill-yellow",strokeColor:"stroke-yellow"})}),e.jsxs("div",{className:"flex gap-2 mt-3 mb-[18px] justify-between",children:[e.jsx("input",{type:"text",value:a||"",placeholder:"Enter URL",readOnly:!0,className:"py-3 pr-5 pl-3 border h-[42px] w-[278px] rounded-full overflow-hidden text-ellipsis whitespace-nowrap"}),e.jsx("input",{ref:h,type:"file",onChange:C,className:"hidden"}),e.jsxs("button",{type:"button",onClick:S,className:"flex gap-2 h-[42px] w-[150px] items-center bg-lightYellow rounded-30 px-4 py-3 text-sm",children:["Upload photo",e.jsx(x,{id:"icon-upload-cloud",strokeColor:"stroke-yellow"})]}),d.avatar&&e.jsx("p",{className:"text-red-500",children:(b=d.avatar)==null?void 0:b.message})]}),e.jsx(w,{className:"h-[52px]",placeholder:"Title",register:m("title"),error:d.title}),e.jsx(w,{className:"my-[18px] h-[52px]",placeholder:"Pet's Name",register:m("name"),error:d.name}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(W,{className:"w-[210px]",placeholder:"Birthday",register:m("birthday"),error:d.birthday}),e.jsx(J,{className:"w-[210px]",register:()=>m("species"),options:[{value:"dog",label:"Dog"},{value:"cat",label:"Cat"},{value:"monkey",label:"Monkey"},{value:"bird",label:"Bird"}],error:d.species})]}),e.jsxs("div",{className:"flex gap-2 h-12 mt-10 justify-end",children:[e.jsx(v,{type:"button",onClick:L,className:"flex items-center bg-alfaBlack rounded-30 py-[14px] px-[67px]",children:"Back"}),e.jsx(v,{type:"submit",className:"flex items-center bg-yellow text-white rounded-30 py-[14px] px-[58px]",children:"Submit"})]})]})]})},ee=()=>e.jsx("section",{className:"mx-auto bg-orange-50 py-8",children:e.jsxs("div",{className:"flex gap-8 justify-center",children:[e.jsx(U,{images:O,imageWidth:"500px",imageHeight:"630px",className:"w-full max-w-[592px] h-[654px] rounded-60"}),e.jsx(K,{})]})});export{ee as default};
